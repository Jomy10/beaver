name: Test

on:
  push:
    branches: [master]

jobs:
  test:
    name: Test
    runs-on: ubuntu-latest
  
    steps:
    - uses: actions/checkout@v3
    - uses: ruby/setup-ruby@v1
      with:
        ruby-version: '3.1'
        bundler-cache: false
    - name: setup minitest
      run: gem install minitest
    - name: setup gnustep to test objc compiling
      run: |
        sudo apt-get install gnustep
        sudo apt-get install gnustep-devel
        sudo apt-get install gobjc
    - name: Run tests
      run: bash build.sh build install test-workflow

